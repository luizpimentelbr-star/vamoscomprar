<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Compras Pessoal</title>
    <link rel="stylesheet" href="style.css">
    <!-- Ícones do Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
      <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

</head>
<body>
    <div class="container">
        <header>
            <h1>Minhas Listas de Compras</h1>
            <button id="theme-toggle" class="icon-button" title="Alternar Tema">
                <span class="material-symbols-outlined">light_mode</span>
            </button>
        </header>

        <main>
            <!-- Área Principal de Interação -->
            <section id="main-section">
                <!-- Formulário Principal da Lista -->
                <div class="form-card">
                    <h2>Dados da Lista</h2>
                    <form id="list-form">
                        <div class="form-group">
                            <label for="store-name">Nome do Empreendimento *</label>
                            <input type="text" id="store-name" required placeholder="Ex: Supermercado ABC">
                        </div>
                        <div class="form-group">
                            <label for="purchase-date">Data da Compra</label>
                            <input type="datetime-local" id="purchase-date">
                        </div>
                    </form>
                </div>

                <!-- Formulário de Adição de Itens -->
                <div class="form-card">
                    <h2>Adicionar Item</h2>
                    <form id="item-form">
                        <div class="form-group">
                            <label for="product-name">Nome do Produto *</label>
                            <div class="input-with-action">
                                <input type="text" id="product-name" required placeholder="Ex: Leite Integral">
                                <button type="button" id="barcode-button" class="icon-button action-button" title="Ler Código de Barras">
                                    <span class="material-symbols-outlined">qr_code_scanner</span>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="quantity">Quantidade</label>
                            <input type="number" id="quantity" value="1" min="0.01" step="0.01">
                        </div>




                            <div class="form-group">
                                <label for="unit">Unidade</label>
                                <select id="unit">
                                    <option value="un">Unidade</option>
                                    <option value="kg">Quilograma (kg)</option>
                                    <option value="g">Grama (g)</option>
                                    <option value="l">Litro (l)</option>
                                    <option value="ml">Mililitro (ml)</option>
                                    <option value="pacote">Pacote</option>
                                    <option value="caixa">Caixa</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="unit-value">Valor Unitário (R$)</label>
                                <div class="input-with-action">
                                    <input type="number" id="unit-value" step="0.01" min="0" placeholder="0.00">
                                    <button type="button" id="calc-button" class="icon-button action-button" title="Abrir Calculadora">
                                        <span class="material-symbols-outlined">calculate</span>
                                    </button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="total-value">Valor Total (R$)</label>
                                <input type="text" id="total-value" readonly placeholder="0.00">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <span class="material-symbols-outlined">add_shopping_cart</span>
                            Adicionar Item
                        </button>
                    </form>
                </div>
            </section>

            <!-- Lista de Itens e Totais -->
            <section id="items-summary-section">
                <div class="items-container">
                    <h2>Itens da Lista</h2>
                    <div id="items-list">
                        <!-- Itens serão inseridos aqui dinamicamente -->
                    </div>
                </div>
                <div class="summary-card">
                    <h2>Resumo da Compra</h2>
                    <div class="summary-item">
                        <span>Total Geral:</span>
                        <strong id="total-general">R$ 0.00</strong>
                    </div>
                    <div class="summary-item">
                        <span>Total Pendentes:</span>
                        <strong id="total-pending">R$ 0.00</strong>
                    </div>
                    <div class="summary-item">
                        <span>Total Comprados:</span>
                        <strong id="total-checked">R$ 0.00</strong>
                    </div>
                </div>
            </section>
        </main>

        <!-- Barra de Ações Inferior -->
        <footer class="action-bar">
            <button id="new-list-btn" class="btn btn-secondary">
                <span class="material-symbols-outlined">note_add</span>
                Nova Lista
            </button>
            <button id="save-list-btn" class="btn btn-primary">
                <span class="material-symbols-outlined">save</span>
                Salvar Lista
            </button>
            <button id="view-saved-btn" class="btn btn-secondary">
                <span class="material-symbols-outlined">view_list</span>
                Listas Salvas
            </button>
        </footer>
    </div>

    <!-- Modal de Listas Salvas -->
    <div id="saved-lists-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Minhas Listas Salvas</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <div id="saved-lists-container">
                    <!-- Listas salvas serão inseridas aqui -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Compartilhamento -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Compartilhar Lista</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <p>Selecione o formato para exportar a lista "<span id="share-list-name"></span>":</p>
                <div class="share-options">
                    <button id="share-txt" class="btn btn-secondary">Exportar como TXT</button>
                    <button id="share-pdf" class="btn btn-secondary">Exportar como PDF</button>
                    <button id="share-xml" class="btn btn-secondary">Exportar como XML</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal da Calculadora -->
    <div id="calculator-modal" class="modal">
        <div class="modal-content calculator">
            <div class="modal-header">
                <h2>Calculadora</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <input type="text" id="calc-display" readonly>
                <div class="calc-buttons">
                    <button class="calc-btn">C</button>
                    <button class="calc-btn">/</button>
                    <button class="calc-btn">*</button>
                    <button class="calc-btn">-</button>
                    <button class="calc-btn num">7</button>
                    <button class="calc-btn num">8</button>
                    <button class="calc-btn num">9</button>
                    <button class="calc-btn">+</button>
                    <button class="calc-btn num">4</button>
                    <button class="calc-btn num">5</button>
                    <button class="calc-btn num">6</button>
                    <button class="calc-btn action">=</button>
                    <button class="calc-btn num">1</button>
                    <button class="calc-btn num">2</button>
                    <button class="calc-btn num">3</button>
                    <button class="calc-btn action">⌫</button>
                    <button class="calc-btn num">0</button>
                    <button class="calc-btn num">.</button>
                    <button class="calc-btn action" style="grid-column: span 2;">Usar Valor</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do Leitor de Código de Barras -->
    <div id="barcode-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Escanear Código de Barras</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="modal-body">
                <p>Aponte a câmera para o código de barras do produto.</p>
                <div id="barcode-reader-container">
                    <video id="barcode-video" style="width: 100%;"></video>
                </div>
                <div id="barcode-result" class="barcode-result"></div>
                <div class="barcode-actions">
                    <button id="start-barcode-scan" class="btn btn-primary">Iniciar Scanner</button>
                    <button id="stop-barcode-scan" class="btn btn-secondary" disabled>Parar Scanner</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Edição de Item -->
<div id="edit-item-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Editar Item</h2>
            <span class="close-button">&times;</span>
        </div>
        <div class="modal-body">
            <form id="edit-item-form">
                <div class="form-group">
                    <label for="edit-product-name">Nome do Produto *</label>
                    <input type="text" id="edit-product-name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-quantity">Quantidade</label>
                        <input type="number" id="edit-quantity" min="0.01" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="edit-unit">Unidade</label>
                        <select id="edit-unit">
                            <option value="un">Unidade</option>
                            <option value="kg">Quilograma (kg)</option>
                            <option value="g">Grama (g)</option>
                            <option value="l">Litro (l)</option>
                            <option value="ml">Mililitro (ml)</option>
                            <option value="pacote">Pacote</option>
                            <option value="caixa">Caixa</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="edit-unit-value">Valor Unitário (R$)</label>
                        <input type="number" id="edit-unit-value" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="edit-total-value">Valor Total (R$)</label>
                        <input type="text" id="edit-total-value" readonly>
                    </div>
                </div>
                <div class="form-actions" style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" class="btn btn-secondary" id="cancel-edit">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>
</div>

    <!-- Biblioteca ZXing para leitura de código de barras -->
    <script src="https://unpkg.com/@zxing/library@latest"></script>
    <!-- Biblioteca jsPDF para geração de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Script principal -->
    <script src="script.js"></script>
    
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("Service Worker registrado!"))
        .catch(err => console.error("Erro no SW:", err));
    }
  </script>

    

</body>
</html>


